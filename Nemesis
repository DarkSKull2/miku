import System.Nemesis (run)
import System.Nemesis.DSL
import Air.Env ((-))
import Prelude hiding ((-))

main = run nemesis
nemesis = do
  
  clean
    [ "**/*.hi"
    , "**/*.o"
    , "manifest"
    ]
    
  desc "prepare cabal dist"
  task "dist" - do
    sh "cabal clean"
    sh "cabal configure"
    sh "cabal sdist"


  desc "show sloc"
  task "stat" - do
    sh "cloc -match-f=hs- --quiet src --no3"

  
  ghci "i" "Test/Test"
  


  where
    ghci n x = task n - sh - "ghci -isrc src/" ++ x ++ ".hs"
