import System.Nemesis (run)
import System.Nemesis.DSL
import Air.Env ((-))
import Prelude hiding ((-))

main = run nemesis
nemesis = do

  clean
    [ "**/*.hi"
    , "**/*.o"
    , "manifest"
    , "test/hello_world"
    ]

  desc "prepare cabal dist"
  task "dist" - do
    sh "cabal clean"
    sh "cabal configure"
    sh "cabal sdist"


  desc "show sloc"
  task "stat" - do
    sh "cloc -match-f=hs- --quiet src --no3"


  task "i" - do
    sh "ghci -isrc src/Test/Test.hs"

  desc "run the test app 'route_example'"
  task "route_example" - do
    sh "runghc -isrc test/route_example.hs"

  desc "run the test app 'hello_world'"
  task "hello_world" - do
    sh "runghc -isrc test/hello_world.hs"

  desc "run the test app 'html_using_moe'"
  task "html_using_moe" - do
    sh "runghc -isrc test/html_using_moe.hs"

  task "moei" - do
    sh "ghci -isrc test/html_using_moe.hs"
